# Multi-Account Support

## Описание

Теперь клиент поддерживает работу с несколькими Telegram аккаунтами. Вы можете:
- Добавлять новые аккаунты
- Переключаться между ними
- Удалять аккаунты
- Просматривать список всех аккаунтов

## Как использовать

### При первом запуске

При запуске клиента вам будет предложено выбрать аккаунт из списка (если их несколько).

```bash
tg
```

Если это первый запуск, клиент попросит ввести ваш номер телефона.

### Управление аккаунтами

Все операции выполняются через команду `/account`:

#### 1. Список всех аккаунтов

```
/account list
```

Показывает все добавленные аккаунты. Текущий аккаунт отмечен символом ✓.

#### 2. Добавить новый аккаунт

```
/account add <номер_телефона>
```

Пример:
```
/account add +79991234567
/account add 79991234567  (+ добавится автоматически)
```

После добавления нового аккаунта нужно перезагрузить клиент.

#### 3. Переключиться на другой аккаунт

```
/account set <номер_телефона>
```

Пример:
```
/account set +79991234567
```

После переключения нужно перезагрузить клиент.

#### 4. Удалить аккаунт

```
/account remove <номер_телефона>
```

Пример:
```
/account remove +79991234567
```

### Выбор аккаунта при запуске

Если у вас несколько аккаунтов, при запуске появится интерактивное меню:

```
              Select Telegram Account
==================================================

▶ +79991234567
  +79999876543
  +79995554444

↑/↓ or j/k: Navigate | Enter: Select | n: New Account | q: Quit
```

**Управление:**
- `j` или `↓` - переместиться вниз
- `k` или `↑` - переместиться вверх
- `Enter` - выбрать аккаунт
- `n` - добавить новый аккаунт (откроет интерфейс ввода)
- `q` - выйти

## Где хранятся данные аккаунтов

Информация об аккаунтах сохраняется в файле:
```
~/.config/tg/accounts.json
```

Пример содержимого:
```json
{
  "accounts": {
    "+79991234567": "",
    "+79999876543": "encryption_key_here"
  },
  "current_phone": "+79991234567"
}
```

Каждый аккаунт имеет свою отдельную базу данных TDLib в папке:
```
~/.cache/tg/
```

## Советы

1. **Разные ключи шифрования**: Вы можете задать разные ключи шифрования для каждого аккаунта в конфиге. Просто отредактируйте `accounts.json`.

2. **Быстрое переключение**: Самый быстрый способ переключиться - перезагрузить клиент (обычно через Ctrl+C и повторный запуск), и вам будет показано меню выбора.

3. **Настройка конфига**: При первом добавлении аккаунта можно указать дополнительные параметры в `~/.config/tg/conf.py`:
   ```python
   ACCOUNTS = {
       "+79991234567": "",  # без шифрования
       "+79999876543": "my_encryption_key",
   }
   ```

## Технические детали

- Каждый аккаунт хранит свою отдельную TDLib базу данных
- Текущий активный аккаунт сохраняется в `accounts.json`
- При добавлении/переключении аккаунтов нужно перезагрузить клиент для применения изменений
- Удаление аккаунта не удаляет его базу данных (она остаётся в `~/.cache/tg/`)
